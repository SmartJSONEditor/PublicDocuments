function sjeClass(){return new ValueTransformer}var ValueTransformer=function(){this.displayName="Key : Value list",this.shortDescription="Key value list with custom output formatting.",this.isEditingDisabled=!0,this.infoUrl="",this.parameters=function(){return[{name:"mainTabs",type:"Tabs",displayName:"Tabs",defaultValue:[{id:"SELECT",displayName:"Select",parameters:[{name:"dictionary",type:"Dictionary",displayName:"Key : Value list",description:"",userInfo:{keyPlaceholder:"Key",valuePlaceholder:"Value"}}]},{id:"SETUP",displayName:"Setup",parameters:[{name:"outputFormat",type:"Popup",displayName:"Output format",description:"Select between key, value or format.",defaultValue:[{displayName:"Using Format",value:"format"},{displayName:"Key",value:"key"},{displayName:"Value",value:"value"}]},{type:"String",name:"format",displayName:"Output string format",description:"Define your output format using %k, %v tokens such %k:%v",defaultValue:"%k=%v",tokenScripts:!0},{type:"String",name:"joiner",displayName:"Join multiple selection items with:",description:"Multiple options join character",defaultValue:"&"},{type:"Segments",name:"output",displayName:"Output",description:"Select how to output the value.",defaultValue:[{displayName:"Prepend",enabled:0},{displayName:"Replace",enabled:1},{displayName:"Append",enabled:0}]}]}],userInfo:{minimalUI:!0}}]},this.transform=function(inputValue,parameters,userInfo){var outputType=1==Array.isArray(parameters.outputFormat)?"format":parameters.outputFormat,outputFormat=parameters.format||"%k=%v",joiner=parameters.joiner||"&",keyValueArray=parameters.dictionary||[],keys=[],values=[];for(var index in keyValueArray){var item=keyValueArray[index];!0===item.enabled&&(keys.push(item.key),values.push(item.value))}var value="";if("key"==outputType&&(value=keys.length>1?keys.join(joiner):keys[0]),"value"==outputType&&(value=values.length>1?values.join(joiner):values[0]),"format"==outputType){var chunks=[];for(var i in keys){var key=keys[i],value=values[i],formatString=outputFormat,replaceKey=formatString.replace(eval("/%k/g"),key),replaceValue=replaceKey.replace(eval("/%v/g"),value);chunks.push(replaceValue)}value=chunks.join(joiner)}return 1==parameters.output[0].enabled?value+inputValue:1==parameters.output[1].enabled?value:1==parameters.output[2].enabled?inputValue+value:"Error-invalid-parameters"}};