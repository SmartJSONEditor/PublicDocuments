function sjeClass(){return new ValueTransformer}var ValueTransformer=function(){this.displayName="JSON Path Selection",this.shortDescription="Extract value from json responses or nodes using jsonPath.",this.isEditingDisabled=!0,this.infoUrl="https://github.com/SmartJSONEditor/PublicDocuments/wiki/Token-Value-Transformer",this.parameters=function(e){if(null==e)return[];var t=DocumentModel.getUserParameterValue("JsonPathSelection.values");null===t&&(t=null);var r={name:"selectionPopup",type:"Popup",displayName:"Select JSON Path Value",description:"Select function type",defaultValue:t},u={name:"cache",type:"Bool",displayName:"Cache popup values",description:"Enable to cache values and improve performance.",defaultValue:!1},i=[];try{i=DocumentModel.getProjectIdList()}catch(l){i=[]}if(0==i.length){var s={name:"urlSection",type:"Section",displayName:"No Projects found ",description:"You do not have any project nodes yet"};return[s]}for(var n=[],o=0;o<i.length;o++){var p=i[o];n.push({displayName:p.displayName,value:p.projectId,imageName:p.imageName})}var d={name:"projectId",type:"Popup",displayName:"Project Identifier",description:"Select Project Identifier",defaultValue:n},m={type:"JsonPath",name:"jsonPathName",displayName:"Popup Display Name Json Path (Optional)",description:"Use space to initiate a json path search or use $ to access root element.",placeholder:"Use space to traverse",defaultValue:"",scriptsDisabled:!0,userInfo:{projectIdParameterName:"projectId"}},v={type:"JsonPath",name:"jsonPathValue",displayName:"Value Json Path",description:"Use space to initiate a json path search or use $ to access root element.",placeholder:"Use space to traverse",defaultValue:"",scriptsDisabled:!0,userInfo:{projectIdParameterName:"projectId"}},c=[{displayName:"Prepend",enabled:0},{displayName:"Replace",enabled:1},{displayName:"Append",enabled:0}],y={type:"Segments",name:"output",displayName:"Output",description:"Select how to output the value.",defaultValue:c},f=[{id:"SELECT",displayName:"Select",parameters:[r,u,y]},{id:"SETUP",displayName:"Setup",parameters:[d,m,v]}],h={name:"mainTabs",type:"Tabs",displayName:"Tabs",defaultValue:f,userInfo:{minimalUI:!0}};return[h]},this.transform=function(e,a){DocumentModel.log(JSON.stringify(a));var r=a.projectId,u=a.jsonPathName,i=a.jsonPathValue,l=a.cache;if(void 0==r||""==r)return"Error-Project-id-parameter-is-undefined-x";var s=[],n=[],s=DocumentModel.jsonPath(r,u);void 0==s&&(s=[]),0==s.count&&(s=[]);var n=DocumentModel.jsonPath(r,i);void 0==n&&(n=[]),0==n.count&&(n=[]);var o=r+":"+u+":"+i,p=DocumentModel.getUserParameterValue("JsonPathSelection.changeHash"),d=1==Array.isArray(a.selectionPopup)?"":a.selectionPopup;if(void 0===d&&(d="Error-undefined-value-x"),o!==p||l===!1){displayNameValueArray=[];for(var m in s){var v=s[m],c=null;1==v.isContainer?(c=v.toJavascriptValue(),c=JSON.stringify(c)):c=v.value,displayNameValueArray.push({displayName:c,value:""})}for(var m in n){var y=n[m],f=null;if(1==y.isContainer?(f=y.toJavascriptValue(),f=JSON.stringify(f)):f=y.value,m<s.length){var h=displayNameValueArray[m];h.displayName=h.displayName+" : "+f,h.value=f}else displayNameValueArray.push({displayName:f,value:f})}DocumentModel.setUserParameterValue("JsonPathSelection.values",displayNameValueArray),DocumentModel.setUserParameterValue("JsonPathSelection.changeHash",o)}return null==d&&(d=""),1==a.output[0].enabled?d+e:1==a.output[1].enabled?d:1==a.output[2].enabled?e+d:"Error-invalid-parameters-x"}};