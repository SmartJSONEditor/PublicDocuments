function sjeClass(){return new ValueTransformer}var ValueTransformer=function(){this.displayName="Key : Value list",this.shortDescription="Key value list with custom output formatting.",this.isEditingDisabled=!0,this.infoUrl="https://github.com/SmartJSONEditor/PublicDocuments/wiki/Token-Value-Transformer",this.parameters=function(e){if(null==e)return[];var a={name:"dictionary",type:"Dictionary",displayName:"Key : Value list",description:"",userInfo:{keyPlaceholder:"Key",valuePlaceholder:"Value"},tokenScripts:!0},t=[{displayName:"Using Format",value:"format"},{displayName:"Key",value:"key"},{displayName:"Value",value:"value"}],r={name:"outputFormat",type:"Popup",displayName:"Output format",description:"Select between key, value or format.",defaultValue:t},u={type:"String",name:"format",displayName:"Output string format",description:"Define your output format using %k, %v tokens such %k:%v",defaultValue:"%k=%v",tokenScripts:!0},i={type:"String",name:"joiner",displayName:"Join multiple selection items with:",description:"Multiple options join character",defaultValue:"&"},l=[{displayName:"Prepend",enabled:0},{displayName:"Replace",enabled:1},{displayName:"Append",enabled:0}],s={type:"Segments",name:"output",displayName:"Output",description:"Select how to output the value.",defaultValue:l},n=[{id:"SELECT",displayName:"Select",parameters:[a,s]},{id:"SETUP",displayName:"Setup",parameters:[r,u,i]}],o={name:"mainTabs",type:"Tabs",displayName:"Tabs",defaultValue:n,userInfo:{minimalUI:!0}};return[o]},this.transform=function(inputValue,parameters,userInfo){var outputType=1==Array.isArray(parameters.outputFormat)?"format":parameters.outputFormat,outputFormat=parameters.format||"%k=%v";outputFormat=DocumentModel.getTokensValue(outputFormat,userInfo.projectNode,pluginIdentifier);var joiner=parameters.joiner||"&",keyValueArray=parameters.dictionary||[],keys=[],values=[];for(var index in keyValueArray){var item=keyValueArray[index];if(item.enabled===!0){keys.push(item.key);var value=DocumentModel.getTokensValue(item.value,userInfo.projectNode,pluginIdentifier);values.push(value)}}var value="";if("key"==outputType&&(value=keys.length>1?keys.join(joiner):keys[0]),"value"==outputType&&(value=values.length>1?values.join(joiner):values[0]),"format"==outputType){var chunks=[];for(var i in keys){var key=keys[i],value=values[i],formatString=outputFormat,replaceKey=formatString.replace(eval("/%k/g"),key),replaceValue=replaceKey.replace(eval("/%v/g"),value);chunks.push(replaceValue)}value=chunks.join(joiner)}return 1==parameters.output[0].enabled?value+inputValue:1==parameters.output[1].enabled?value:1==parameters.output[2].enabled?inputValue+value:"Error-invalid-parameters-x"}};